<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SignalK Daily GPX Plugin</title>
    <link rel="stylesheet" href="assets/styles/styles.scss" />
    <script type="module" src="assets/scripts/main.mjs"></script>
  </head>

  <body>
    <!-- flex column -->
    <div class="container-fluid d-flex flex-column h-100">
      <h1 class="d-flex align-items-center my-3">
        <img src="./assets/icon-72x72.png" class="rounded me-3" height="40" />
        SignalK Daily GPX Plugin
      </h1>

      <!-- nav links -->
      <nav class="mb-3">
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
          <button
            class="nav-link active"
            id="nav-gpx-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-gpx"
            type="button"
            role="tab"
          >
            GPX Files
          </button>
          <button
            class="nav-link"
            id="nav-map-tab"
            data-bs-toggle="tab"
            data-bs-target="#nav-map"
            type="button"
            role="tab"
          >
            Map
          </button>
        </div>
      </nav>

      <!-- tab content -->
      <div class="tab-content flex-fill min-h-0 mb-3" id="nav-tabContent">
        <!-- gpx tab -->
        <div
          class="tab-pane fade show active h-100"
          id="nav-gpx"
          role="tabpanel"
          tabindex="0"
        >
          <div class="d-flex flex-column h-100">
            <div>
              <p>
                The plugin will automatically collect the saved positions from
                the buffer and save them to a GPX file at midnight each day. You
                can force a GPX file to be written immediately and can clear
                saved positions out the buffer using the buttons below.
              </p>

              <p>
                <strong
                  ><span id="bufferCount">0</span> positions saved in the local
                  buffer.</strong
                >
              </p>

              <p>
                <button
                  type="button"
                  class="btn btn-primary"
                  id="write-gpx-file-now"
                >
                  Save to GPX
                </button>
                <button
                  type="button"
                  class="btn btn-warning"
                  id="clear-buffer-now"
                >
                  Clear Buffer
                </button>
              </p>
            </div>

            <div class="card flex-fill min-h-0 mb-3">
              <div class="card-header">
                <h5>GPX Files (<span id="fileCount">0</span>)</h5>
              </div>
              <div class="card-body flex-fill overflow-y-auto">
                <ul class="list-unstyled" id="files"></ul>
              </div>
            </div>
          </div>
        </div>

        <!-- map tab -->
        <div
          class="tab-pane fade h-100"
          id="nav-map"
          role="tabpanel"
          tabindex="0"
        >
          <div id="map" class="w-100 h-100"></div>
        </div>
      </div>
    </div>
  </body>
</html>
